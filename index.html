<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Tay Aviator 100x</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <style>
    *{margin:0;padding:0;box-sizing:border-box}
    body{
      font-family:'Poppins',sans-serif;
      background:linear-gradient(135deg,#1a0f1f,#2a0939,#1a0f1f);
      color:#fff;
      padding-top:60px;
      padding-bottom:70px;
    }
    h1,h2,h3{font-weight:bold}

    /* ===== CABE√áALHO ===== */
    .topbar{
      position:fixed;top:0;left:0;width:100%;
      display:flex;justify-content:space-between;align-items:center;
      padding:12px 20px;background:#2a0939;
      border-bottom:2px solid #ff4da6;z-index:1000;
    }
    .logo{font-size:1.4rem;font-weight:700;color:#ff4da6}
    .topbar nav a{
      margin-left:15px;text-decoration:none;color:#f8bbd0;font-weight:500;
    }
    .topbar nav a:hover{color:#ff4da6}
    .menu-btn{background:none;border:none;color:#fff;font-size:1.3rem;cursor:pointer}

    /* ===== CONTE√öDO ===== */
    .conteudo{text-align:center;padding:20px}
    .secao{display:none}
    .secao.ativo{display:block}
    .foto-principal{width:180px;margin:20px 0;border-radius:15px;box-shadow:0 6px 20px rgba(0,0,0,.4)}
    #home h1{color:#ff4da6}#home p{color:#f8bbd0}

    /* ===== TIP MINER ===== */
    .tip-grid{
      display:grid;
      grid-template-columns:repeat(auto-fit,minmax(80px,1fr));
      gap:10px;margin-top:20px;
    }
    .tip-card{
      border-radius:10px;
      padding:10px 5px;
      text-align:center;
      font-weight:bold;
      font-size:1rem;
      color:#fff;
      box-shadow:0 4px 12px rgba(0,0,0,.4);
    }
    .tip-card.rosa{background:#cc0066}
    .tip-card.roxo{background:#7a00cc}
    .tip-card.verde{background:#00b894}
    .tip-card.cinza{background:#555}
    .pulse{animation:pulse 2s infinite}
    @keyframes pulse{0%,100%{opacity:1}50%{opacity:.6}}

    /* ===== BOT√ÉO FLUTUANTE ===== */
    #btnEntrada{
      position:fixed;
      bottom:90px;
      left:20px;
      background:#ff4da6;
      color:#fff;
      border:none;
      padding:15px 20px;
      border-radius:50px;
      font-weight:bold;
      cursor:pointer;
      box-shadow:0 0 10px rgba(255,77,166,.6);
      z-index:1001;
      display:flex;
      align-items:center;
      gap:10px;
    }
    #btnEntrada i{font-size:1.3rem}

    /* ===== CARD FLUTUANTE (id√™ntico √† imagem) ===== */
    #cardEntrada{
      display:none;
      position:fixed;
      bottom:160px;
      left:20px;
      background:#0b0b3d;
      border-radius:15px;
      padding:20px;
      width:300px;
      box-shadow:0 0 25px rgba(0,0,0,.6);
      z-index:1002;
      text-align:center;
      animation:fadeIn .3s ease;
    }
    @keyframes fadeIn{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}

    #cardEntrada h3{
      font-size:1.3rem;
      font-weight:700;
      color:#fff;
      margin-bottom:10px;
    }
    #cardEntrada h3::before{
      content:"‚è≥ ";
    }
    #cardEntrada p{
      font-size:1rem;
      margin:6px 0;
    }
    #cardEntrada b{
      color:#ff4da6;
    }
    .faixa-gray{
      background:#222;
      color:#fff;
      padding:10px;
      border-radius:8px;
      margin-top:12px;
      font-size:0.9rem;
    }
    .faixa-red{
      background:#ff3b3b;
      color:#fff;
      font-weight:bold;
      border-radius:8px;
      padding:10px;
      margin-top:10px;
      font-size:0.9rem;
    }
    #cardEntrada button{
      margin-top:12px;
      width:100%;
      background:#ff3b3b;
      color:#fff;
      border:none;
      padding:10px;
      border-radius:8px;
      font-weight:bold;
      cursor:pointer;
    }

    /* ===== RODAP√â ===== */
    .footer-bar{
      position:fixed;bottom:0;left:0;width:100%;
      display:flex;justify-content:space-around;align-items:center;
      background:#2a0939;border-top:2px solid #ff4da6;
      padding:8px 0;z-index:1000;
    }
    .footer-bar a{
      flex:1;text-align:center;color:#f8bbd0;
      text-decoration:none;display:flex;flex-direction:column;align-items:center;gap:4px;
    }
    .footer-bar a:hover,.footer-bar a.ativo{color:#ff4da6}
    .footer-bar a i{font-size:1.2rem}

    /* ===== LOGIN MODAL ===== */
    .login-modal{
      position:fixed;inset:0;background:rgba(0,0,0,.85);
      display:none;align-items:center;justify-content:center;z-index:9999;
    }
    .login-box{
      background:#1c0f2e;padding:25px;border-radius:12px;
      width:90%;max-width:350px;text-align:center;border:2px solid #ff4da6;
    }
    .login-box h2{color:#ff4da6;margin-bottom:15px}
    .login-box input{
      display:block;width:100%;margin:8px 0;padding:10px;border:none;border-radius:6px;
    }
    .login-box button{
      margin-top:10px;width:100%;background:#ff4da6;color:#fff;border:none;
      padding:10px;border-radius:6px;cursor:pointer;font-weight:bold;
    }
    .login-box a{color:#ffb6e6;font-size:.9em}
  </style>
</head>
<body>

  <!-- ===== CABE√áALHO ===== -->
  <header class="topbar">
    <button class="menu-btn"><i class="fas fa-bars"></i></button>
    <div class="logo">GoathBet</div>
    <nav>
      <a href="planos.html">Planos</a>
      <a href="#" id="btnLogin">Login</a>
      <a href="#" id="btnLogout" style="display:none;" onclick="logoutUsuario()">Sair</a>
    </nav>
  </header>

  <!-- ===== CONTE√öDO ===== -->
  <main class="conteudo">
    <section id="home" class="secao ativo">
      <img src="img/foto.png" alt="Tay Aviator" class="foto-principal">
      <h1>Tay Aviator 100x</h1>
      <p>Entradas inteligentes</p>
    </section>

    <section id="calls" class="secao">
      <h2>üíé Tip Miner</h2>
      <div class="tip-grid" id="gridTipMiner"></div>
    </section>

    <section id="jogar" class="secao">
      <h2>Jogar</h2>
      <iframe 
        src="https://www.goathbet.com/game/spribe-aviator?r=zktgmbwl"
        class="jogo-frame"
        title="Aviator"
        allowfullscreen
        style="width:100%;height:calc(100vh - 160px);border:none;border-radius:12px;">
      </iframe>
    </section>

    <section id="live" class="secao">
      <h2>Live</h2>
      <p>Transmiss√µes ao vivo e sinais em tempo real.</p>
    </section>
  </main>

  <!-- ===== RODAP√â ===== -->
  <footer class="footer-bar">
    <a href="#home" class="ativo"><i class="fas fa-home"></i><span>Home</span></a>
    <a href="#calls"><i class="fas fa-signal"></i><span>Tip Miner</span></a>
    <a href="#jogar"><i class="fas fa-plane"></i><span>Jogar</span></a>
    <a href="#live"><i class="fas fa-video"></i><span>Live</span></a>
  </footer>

  <!-- ===== BOT√ÉO FLUTUANTE ===== -->
  <button id="btnEntrada"><i class="fas fa-bolt"></i> <span id="timerText">60s</span></button>

  <!-- ===== CARD DE ENTRADA (atualizado igual √† imagem) ===== -->
  <div id="cardEntrada">
    <h3>Pr√≥xima Entrada</h3>
    <p><b>Hor√°rio:</b> <span id="horaEntrada">--:--</span></p>
    <p><b>Prote√ß√£o:</b> <span id="protecaoEntrada">2x</span></p>
    <p><b>Probabilidade:</b> <span id="probEntrada">--</span></p>
    <div class="faixa-gray">‚è∞ Entrar 30 segundos antes e 30 segundos depois</div>
    <div class="faixa-red">‚ö†Ô∏è Jogue com responsabilidade!</div>
    <button onclick="fecharCard()">Fechar</button>
  </div>

  <!-- ===== LOGIN MODAL ===== -->
  <div id="loginModal" class="login-modal">
    <div class="login-box">
      <h2>üîê Acesso ao GoathBet</h2>
      <p id="loginMsg">Fa√ßa login ou registre-se para continuar</p>
      <div id="loginForm">
        <input type="email" id="emailLogin" placeholder="Email">
        <input type="password" id="senhaLogin" placeholder="Senha">
        <button onclick="loginUsuario()">Entrar</button>
        <p><a href="#" onclick="mostrarRegistro()">Criar conta</a></p>
      </div>
      <div id="registroForm" style="display:none;">
        <input type="email" id="emailRegistro" placeholder="Email">
        <input type="password" id="senhaRegistro" placeholder="Senha">
        <button onclick="registrarUsuario()">Registrar</button>
        <p><a href="#" onclick="mostrarLogin()">J√° tenho conta</a></p>
      </div>
    </div>
  </div>

  <!-- ===== SCRIPTS ===== -->
  <script type="module">
    import { db } from "./firebase.js";
    import { collection, addDoc, query, orderBy, limit, onSnapshot, serverTimestamp } 
      from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

    const btnEntrada=document.getElementById("btnEntrada");
    const cardEntrada=document.getElementById("cardEntrada");
    const probEntrada=document.getElementById("probEntrada");
    const horaEntrada=document.getElementById("horaEntrada");
    const tempoRestante=document.getElementById("timerText");
    const gridTipMiner=document.getElementById("gridTipMiner");

    btnEntrada.addEventListener("click",()=>cardEntrada.style.display="flex");
    window.fecharCard=()=>cardEntrada.style.display="none";

    let tempoTotal=60,intervalo;

    function getTempoRestante(){
      const inicioSalvo=localStorage.getItem("inicioTimer");
      if(!inicioSalvo)return tempoTotal;
      const diff=Math.floor((Date.now()-parseInt(inicioSalvo))/1000);
      const restante=tempoTotal-diff;
      return restante>0?restante:0;
    }

    async function iniciarTimer(){
      let tempo=getTempoRestante();
      atualizarUI(tempo);
      intervalo=setInterval(async()=>{
        tempo--;atualizarUI(tempo);
        if(tempo<=0){
          clearInterval(intervalo);
          const multiplicador=parseFloat((Math.random()*99+1).toFixed(2));
          const agora=new Date();
          const hora=String(agora.getHours()).padStart(2,"0");
          const minuto=String(agora.getMinutes()).padStart(2,"0");
          horaEntrada.innerText=`${hora}:${minuto}`;
          probEntrada.innerText=`${multiplicador}x`;
          await addDoc(collection(db,"tipminer"),{multiplicador,hora,minuto,criadoEm:serverTimestamp()});
          localStorage.setItem("inicioTimer",Date.now().toString());
          iniciarTimer();
        }
      },1000);
    }

    function atualizarUI(tempo){
      tempoRestante.innerText=tempo+"s";
    }

    if(!localStorage.getItem("inicioTimer"))localStorage.setItem("inicioTimer",Date.now().toString());
    iniciarTimer();

    const q=query(collection(db,"tipminer"),orderBy("criadoEm","desc"),limit(60));
    onSnapshot(q,(snap)=>{
      gridTipMiner.innerHTML="";
      snap.forEach(doc=>{
        const d=doc.data();
        const cor=d.multiplicador>=10?"rosa":d.multiplicador>=5?"roxo":d.multiplicador>=2?"verde":"cinza";
        const card=document.createElement("div");
        card.className=`tip-card ${cor} pulse`;
        card.innerHTML=`<div>${d.multiplicador.toFixed(2)}x</div>
        <span>${String(d.hora).padStart(2,"0")}:${String(d.minuto).padStart(2,"0")}</span>`;
        gridTipMiner.appendChild(card);
      });
    });

    const links=document.querySelectorAll(".footer-bar a"),secoes=document.querySelectorAll(".secao");
    links.forEach(link=>{
      link.addEventListener("click",e=>{
        e.preventDefault();
        secoes.forEach(sec=>sec.classList.remove("ativo"));
        links.forEach(l=>l.classList.remove("ativo"));
        const alvo=link.getAttribute("href").replace("#","");
        document.getElementById(alvo).classList.add("ativo");
        link.classList.add("ativo");
      });
    });

    document.getElementById("btnLogin").addEventListener("click",e=>{
      e.preventDefault();
      document.getElementById("loginModal").style.display="flex";
    });
  </script>
</body>
</html>